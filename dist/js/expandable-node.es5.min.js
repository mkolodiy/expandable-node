/**
 * expandable-node 1.0.1 MIT | https://github.com/mkolodiy/expandable-node
 */

/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var e=function(){return(e=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},n="Could not find the container element.",t="The deleteBtnCb is not correctly defined. Please provide a proper callback function.",r="Could not find the delete button element.",o="Could not find the edit button element.",i="The editBtnCb is not correctly defined. Please provide a proper callback function.",s="Could not find the expand button element.",l="The expandBtnCb is not correctly defined. Please provide a proper callback function.",c="The options object does not contain the nodes array.",d="Could not find the shape element.",a="The selectCb is not correctly defined. Please provide a proper callback function.",p="Could not find the wrapper element.",u="exp-node-container",h="exp-node-hide",f="exp-node-shape-selection-active",E="exp-node-wrapper",v={CHILDREN_ACTIONS_WRAPPER:"."+"exp-node-children-actions-wrapper",CHILDREN:"."+"exp-node-children",CONTAINER:"."+u,DELETE_BTN:"."+"exp-node-delete-btn",EXPAND_BTN:"."+"exp-node-expand-btn",EDIT_BTN:"."+"exp-node-edit-btn",SHAPE_SELECTION:"."+"exp-node-shape-selection",SHAPE:"."+"exp-node-shape",WRAPPER:"."+E,EXPAND_LESS_BTN:"."+"exp-node-expand-less-btn",EXPAND_MORE_BTN:"."+"exp-node-expand-more-btn"},b=function(){function e(){}return e.checkIfElementContainsClassName=function(e,n){return e.classList.contains(n)},e.removeSelectionFromAllShapes=function(){var e=document.querySelector(v.WRAPPER);if(null==e)throw new Error(p);e.querySelectorAll(v.SHAPE_SELECTION).forEach((function(e){return e.classList.remove(f)}))},e.getCssClassForAssignedType=function(e,n){void 0===n&&(n=[]);var t=e.type;if(null!=t&&this.arrayNotEmpty(n)){var r=n.find((function(e){return e.type===t}));return null!=r?r.cssClass:""}return""},e.arrayEmpty=function(e){return void 0===e&&(e=[]),null==e||0===e.length},e.arrayNotEmpty=function(e){return void 0===e&&(e=[]),!this.arrayEmpty(e)},e.checkIfObjectHasProperty=function(e,n){return void 0===e&&(e={}),e.hasOwnProperty(n)},e.isDefined=function(e){return null!=e},e}(),y=function(){function e(e,n,t,r){this.node=e,this.containerEl=n,this.callbacks=t,this.types=r,this.render()}return e.create=function(n,t,r,o){return new e(n,t,r,o)},e.prototype.render=function(){var e=this.node.id,n=this.node.description,t=this.node.enableEditBtn,r=this.node.childNodes,o=document.createElement("div");if(o.id=e,o.classList.add(u),o.innerHTML='\n    <div class="exp-node-row">\n      <div class="exp-node-element">\n        <div class="exp-node-shape '+b.getCssClassForAssignedType(this.node,this.types)+'"></div>\n        <div class="exp-node-shape-selection"></div>\n      </div>\n      <div class="exp-node-element">\n        <div class="exp-node-actions">\n          <button type="button" class="exp-node-delete-btn"></button>\n          <button type="button" class="exp-node-edit-btn exp-node-hide"></button>\n        </div>\n        <div class="exp-node-description">\n            '+n+'\n        </div>\n      </div>\n    </div>\n    <div class="exp-node-row">\n      <div class="exp-node-element exp-node-children-actions-wrapper"></div>\n      <div class="exp-node-element exp-node-children-wrapper">\n          <div class="exp-node-children"></div>\n      </div>\n    </div>',b.checkIfElementContainsClassName(this.containerEl,E))this.containerEl.appendChild(o);else{var i=this.containerEl.querySelector(v.CHILDREN);null!==i&&i.appendChild(o)}b.arrayNotEmpty(r)&&(this.enableChildrenActions(o),this.renderChildNodes(o)),t&&this.registerEditBtnClickListener(o),this.registerDeleteBtnClickListener(o),this.registerSelectClickListener(o)},e.prototype.enableChildrenActions=function(e){var n=e.querySelector(v.CHILDREN_ACTIONS_WRAPPER);null!==n&&(n.innerHTML='<div class="exp-node-children-actions">\n        <button type="button" class="exp-node-expand-btn exp-node-expand-less-btn"></button>\n      </div>',this.registerExpandBtnClickListener(e))},e.prototype.renderChildNodes=function(n){var t=this,r=this.node.childNodes;(void 0===r?[]:r).forEach((function(r){return e.create(r,n,t.callbacks,t.types)}))},e.prototype.registerExpandBtnClickListener=function(e){var n=this,t=e.querySelector(v.EXPAND_BTN),r=e.querySelector(v.CHILDREN);if(null===t||null===r)throw new Error(s);t.addEventListener("click",(function(){if(r.classList.toggle(h),b.checkIfElementContainsClassName(r,h)?(t.classList.remove("exp-node-expand-less-btn"),t.classList.add("exp-node-expand-more-btn")):(t.classList.remove("exp-node-expand-more-btn"),t.classList.add("exp-node-expand-less-btn")),b.checkIfObjectHasProperty(n.callbacks,"expandBtnCb")){var e=n.callbacks.expandBtnCb;if(!b.isDefined(e))throw new Error(l);e(n.node)}}))},e.prototype.registerEditBtnClickListener=function(e){var n=this,t=e.querySelector(v.EDIT_BTN);if(null==t)throw new Error(o);t.classList.remove(h),t.addEventListener("click",(function(){if(b.checkIfObjectHasProperty(n.callbacks,"editBtnCb")){var e=n.callbacks.editBtnCb;if(!b.isDefined(e))throw new Error(i);e(n.node)}}))},e.prototype.registerDeleteBtnClickListener=function(e){var n=this,o=e.querySelector(v.DELETE_BTN),i=e.parentElement;if(null==o||null==i)throw new Error(r);o.addEventListener("click",(function(){i.removeChild(e);var r=n.containerEl.querySelector(v.CHILDREN_ACTIONS_WRAPPER),o=n.containerEl.querySelector(v.CHILDREN);if(null!=r&&null!=o&&0===o.children.length&&(r.innerHTML=""),b.checkIfObjectHasProperty(n.callbacks,"deleteBtnCb")){var s=n.callbacks.deleteBtnCb;if(!b.isDefined(s))throw new Error(t);s(n.node)}}))},e.prototype.registerSelectClickListener=function(e){var n=this,t=e.querySelector(v.SHAPE),r=e.querySelector(v.SHAPE_SELECTION);if(null==t||null==r)throw new Error(d);t.addEventListener("click",(function(){if(b.removeSelectionFromAllShapes(),r.classList.add(f),b.checkIfObjectHasProperty(n.callbacks,"selectCb")){var e=n.callbacks.selectCb;if(!b.isDefined(e))throw new Error(a);e(n.node)}}))},e}(),C=function(){function t(n){this.options=e({},n),this.createWrapper()}return t.create=function(e){return new t(e)},t.prototype.createWrapper=function(){var e=this.options.container,t=document.querySelector("#"+e)?document.querySelector("#"+e):document.querySelector("."+e),r=document.createElement("div");if(r.classList.add(E),null===t)throw new Error(n);t.appendChild(r),this.renderNodes(r)},t.prototype.renderNodes=function(e){var n=this.options.nodes,t=this.options.callbacks,r=this.options.types;if(b.arrayEmpty(n))throw Error(c);n.forEach((function(n){return y.create(n,e,t,r)}))},t}();export default C;
//# sourceMappingURL=expandable-node.es5.min.js.map
