/**
 * expandable-node 1.0.1 MIT | https://github.com/mkolodiy/expandable-node
 */

!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self)["expandable-node"]={})}(this,(function(e){"use strict";
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var n=function(){return(n=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},t="Could not find the container element.",r="The deleteBtnCb is not correctly defined. Please provide a proper callback function.",o="Could not find the delete button element.",i="Could not find the edit button element.",s="The editBtnCb is not correctly defined. Please provide a proper callback function.",c="Could not find the expand button element.",l="The expandBtnCb is not correctly defined. Please provide a proper callback function.",d="The options object does not contain the nodes array.",a="Could not find the shape element.",p="The selectCb is not correctly defined. Please provide a proper callback function.",u="Could not find the wrapper element.",h="exp-node-container",f="exp-node-hide",E="exp-node-shape-selection-active",v="exp-node-wrapper",b={CHILDREN_ACTIONS_WRAPPER:"."+"exp-node-children-actions-wrapper",CHILDREN:"."+"exp-node-children",CONTAINER:"."+h,DELETE_BTN:"."+"exp-node-delete-btn",EXPAND_BTN:"."+"exp-node-expand-btn",EDIT_BTN:"."+"exp-node-edit-btn",SHAPE_SELECTION:"."+"exp-node-shape-selection",SHAPE:"."+"exp-node-shape",WRAPPER:"."+v,EXPAND_LESS_BTN:"."+"exp-node-expand-less-btn",EXPAND_MORE_BTN:"."+"exp-node-expand-more-btn"},y=function(){function e(){}return e.checkIfElementContainsClassName=function(e,n){return e.classList.contains(n)},e.removeSelectionFromAllShapes=function(){var e=document.querySelector(b.WRAPPER);if(null==e)throw new Error(u);e.querySelectorAll(b.SHAPE_SELECTION).forEach((function(e){return e.classList.remove(E)}))},e.getCssClassForAssignedType=function(e,n){void 0===n&&(n=[]);var t=e.type;if(null!=t&&this.arrayNotEmpty(n)){var r=n.find((function(e){return e.type===t}));return null!=r?r.cssClass:""}return""},e.arrayEmpty=function(e){return void 0===e&&(e=[]),null==e||0===e.length},e.arrayNotEmpty=function(e){return void 0===e&&(e=[]),!this.arrayEmpty(e)},e.checkIfObjectHasProperty=function(e,n){return void 0===e&&(e={}),e.hasOwnProperty(n)},e.isDefined=function(e){return null!=e},e}(),C=function(){function e(e,n,t,r){this.node=e,this.containerEl=n,this.callbacks=t,this.types=r,this.render()}return e.create=function(n,t,r,o){return new e(n,t,r,o)},e.prototype.render=function(){var e=this.node.id,n=this.node.description,t=this.node.enableEditBtn,r=this.node.childNodes,o=document.createElement("div");if(o.id=e,o.classList.add(h),o.innerHTML='\n    <div class="exp-node-row">\n      <div class="exp-node-element">\n        <div class="exp-node-shape '+y.getCssClassForAssignedType(this.node,this.types)+'"></div>\n        <div class="exp-node-shape-selection"></div>\n      </div>\n      <div class="exp-node-element">\n        <div class="exp-node-actions">\n          <button type="button" class="exp-node-delete-btn"></button>\n          <button type="button" class="exp-node-edit-btn exp-node-hide"></button>\n        </div>\n        <div class="exp-node-description">\n            '+n+'\n        </div>\n      </div>\n    </div>\n    <div class="exp-node-row">\n      <div class="exp-node-element exp-node-children-actions-wrapper"></div>\n      <div class="exp-node-element exp-node-children-wrapper">\n          <div class="exp-node-children"></div>\n      </div>\n    </div>',y.checkIfElementContainsClassName(this.containerEl,v))this.containerEl.appendChild(o);else{var i=this.containerEl.querySelector(b.CHILDREN);null!==i&&i.appendChild(o)}y.arrayNotEmpty(r)&&(this.enableChildrenActions(o),this.renderChildNodes(o)),t&&this.registerEditBtnClickListener(o),this.registerDeleteBtnClickListener(o),this.registerSelectClickListener(o)},e.prototype.enableChildrenActions=function(e){var n=e.querySelector(b.CHILDREN_ACTIONS_WRAPPER);null!==n&&(n.innerHTML='<div class="exp-node-children-actions">\n        <button type="button" class="exp-node-expand-btn exp-node-expand-less-btn"></button>\n      </div>',this.registerExpandBtnClickListener(e))},e.prototype.renderChildNodes=function(n){var t=this,r=this.node.childNodes;(void 0===r?[]:r).forEach((function(r){return e.create(r,n,t.callbacks,t.types)}))},e.prototype.registerExpandBtnClickListener=function(e){var n=this,t=e.querySelector(b.EXPAND_BTN),r=e.querySelector(b.CHILDREN);if(null===t||null===r)throw new Error(c);t.addEventListener("click",(function(){if(r.classList.toggle(f),y.checkIfElementContainsClassName(r,f)?(t.classList.remove("exp-node-expand-less-btn"),t.classList.add("exp-node-expand-more-btn")):(t.classList.remove("exp-node-expand-more-btn"),t.classList.add("exp-node-expand-less-btn")),y.checkIfObjectHasProperty(n.callbacks,"expandBtnCb")){var e=n.callbacks.expandBtnCb;if(!y.isDefined(e))throw new Error(l);e(n.node)}}))},e.prototype.registerEditBtnClickListener=function(e){var n=this,t=e.querySelector(b.EDIT_BTN);if(null==t)throw new Error(i);t.classList.remove(f),t.addEventListener("click",(function(){if(y.checkIfObjectHasProperty(n.callbacks,"editBtnCb")){var e=n.callbacks.editBtnCb;if(!y.isDefined(e))throw new Error(s);e(n.node)}}))},e.prototype.registerDeleteBtnClickListener=function(e){var n=this,t=e.querySelector(b.DELETE_BTN),i=e.parentElement;if(null==t||null==i)throw new Error(o);t.addEventListener("click",(function(){i.removeChild(e);var t=n.containerEl.querySelector(b.CHILDREN_ACTIONS_WRAPPER),o=n.containerEl.querySelector(b.CHILDREN);if(null!=t&&null!=o&&0===o.children.length&&(t.innerHTML=""),y.checkIfObjectHasProperty(n.callbacks,"deleteBtnCb")){var s=n.callbacks.deleteBtnCb;if(!y.isDefined(s))throw new Error(r);s(n.node)}}))},e.prototype.registerSelectClickListener=function(e){var n=this,t=e.querySelector(b.SHAPE),r=e.querySelector(b.SHAPE_SELECTION);if(null==t||null==r)throw new Error(a);t.addEventListener("click",(function(){if(y.removeSelectionFromAllShapes(),r.classList.add(E),y.checkIfObjectHasProperty(n.callbacks,"selectCb")){var e=n.callbacks.selectCb;if(!y.isDefined(e))throw new Error(p);e(n.node)}}))},e}(),x=function(){function e(e){this.options=n({},e),this.createWrapper()}return e.create=function(n){return new e(n)},e.prototype.createWrapper=function(){var e=this.options.container,n=document.querySelector("#"+e)?document.querySelector("#"+e):document.querySelector("."+e),r=document.createElement("div");if(r.classList.add(v),null===n)throw new Error(t);n.appendChild(r),this.renderNodes(r)},e.prototype.renderNodes=function(e){var n=this.options.nodes,t=this.options.callbacks,r=this.options.types;if(y.arrayEmpty(n))throw Error(d);n.forEach((function(n){return C.create(n,e,t,r)}))},e}();e.ExpNode=x,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=expandable-node.umd.min.js.map
